{% import "ki/macros/forms.jinja2" as _forms %}

{% macro login_form(view) %}
    <div class="container box auth login-form">
        <h3>{{_("Login")}}</h3>

        {# {{_actions.render_message(view.action_result)}} #}
        {% set form_data = (dict() if not view.action_result else view.action_result.input_data) %}
                
        <form action="{{url_for("profile.login")}}" method="POST" accept-charset="UTF-8">
            <div class="u-full-width">
                <input type="text" name="name" placeholder="username"
                       value="{{form_data.username}}"
                       class="u-full-width" maxlength="128" required/>
            </div>
            <div class="u-full-width">
                <input type="password" name="password" placeholder="password" class="u-full-width" maxlength="256" required/>
            </div>
            <input type="submit" value="Login" class="button button-primary"/>
            {{_forms.csrf_form_input()}}
        </form>

        <a href="{{url_for('profile.signup')}}">{{_("Sign-up")}}</a>
        |
        <a href="{{url_for('profile.recovery')}}">{{_("Profile recovery")}}</a>
    </div>
{% endmacro %}
